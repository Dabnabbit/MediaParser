/**
 * Tile Component Styles
 *
 * Styles for tile sub-elements (image, badges, checkbox, filename)
 * and viewport position states. Grid/interactive tile styles are in main.css.
 */

/* ============================================
   TILE IMAGE
   ============================================ */

/* ============================================
   BADGES SYSTEM
   ============================================ */

.tile-badges {
    position: absolute;
    inset: var(--badge-gap);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    pointer-events: none;
    z-index: 2;
}

.badge-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.badge-row.badge-bottom {
    align-items: flex-end;
}

.badge-group {
    display: flex;
    gap: var(--badge-gap);
    pointer-events: auto;
}

.badge-group.badge-right {
    flex-direction: row-reverse;
}

/* Individual badge styles */
.tile-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: var(--badge-size);
    height: var(--badge-size);
    padding: var(--badge-padding);
    border-radius: 4px;
    font-size: var(--badge-font);
    font-weight: 600;
    line-height: 1;
    color: white;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    transition: transform 0.15s ease, opacity 0.15s ease;
}

/* Confidence badges */
.tile-badge.confidence-high {
    background: var(--color-high, #22c55e);
}

.tile-badge.confidence-medium {
    background: var(--color-medium, #f59e0b);
    color: #000;
    text-shadow: none;
}

.tile-badge.confidence-low {
    background: var(--color-low, #ef4444);
}

.tile-badge.confidence-none {
    background: var(--color-text-muted, #6b7280);
}

/* Status badges */
.tile-badge.reviewed {
    background: var(--color-high, #22c55e);
}

.tile-badge.failed {
    background: var(--color-low, #ef4444);
}

.tile-badge.discarded {
    background: var(--color-danger, #dc2626);
}

.tile-badge.duplicate {
    background: var(--duplicate-color, hsl(45, 90%, 50%));
    color: #000;
    text-shadow: none;
}

.tile-badge.similar {
    background: var(--similar-color, hsl(210, 75%, 50%));
}

.tile-badge.media-video {
    background: var(--color-info, #3b82f6);
}

/* Badge hover effects */
.media-tile:hover .tile-badge {
    transform: scale(1.05);
}

/* ============================================
   CHECKBOX
   ============================================ */

.tile-checkbox {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--badge-size);
    height: var(--badge-size);
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.15s ease;
}

.media-tile:hover .tile-checkbox,
.media-tile.selected .tile-checkbox {
    opacity: 1;
}

.tile-checkbox input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
}

.tile-checkbox .checkmark {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    border: 2px solid rgba(255, 255, 255, 0.5);
    border-radius: 4px;
    transition: all 0.15s ease;
}

.tile-checkbox .checkmark::after {
    content: '';
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg) scale(0);
    transition: transform 0.15s ease;
}

.tile-checkbox input:checked ~ .checkmark {
    background: var(--color-primary, #3b82f6);
    border-color: var(--color-primary, #3b82f6);
}

.tile-checkbox input:checked ~ .checkmark::after {
    transform: rotate(45deg) scale(1);
}

/* ============================================
   FILENAME OVERLAY
   ============================================ */

.tile-filename {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: var(--badge-gap) calc(var(--badge-gap) * 1.5);
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
    color: white;
    font-size: var(--badge-font);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    opacity: 0;
    transform: translateY(100%);
    transition: opacity 0.2s ease, transform 0.2s ease;
}

.media-tile:hover .tile-filename,
.media-tile.selected .tile-filename {
    opacity: 1;
    transform: translateY(0);
}

/* Always show filename in preview mode */
.media-tile.tile-preview .tile-filename {
    opacity: 1;
    transform: translateY(0);
}

/* ============================================
   MIPMAP RESOLUTION TRANSITIONS
   ============================================ */

/* Smooth image source transitions */
.tile-image {
    transition: opacity 0.2s ease;
}

.tile-image-fade {
    opacity: 0.7;
}

/* ============================================
   VIEWPORT POSITION STATES
   ============================================ */

/* Base transition for active viewport positions (not grid) */
.thumbnail[data-vp-pos="prev"],
.thumbnail[data-vp-pos="current"],
.thumbnail[data-vp-pos="next"] {
    transition:
        transform 0.35s cubic-bezier(0.4, 0, 0.2, 1),
        opacity 0.35s ease,
        width 0.35s ease,
        height 0.35s ease,
        left 0.35s ease;
}

/* Grid position (default) */
.thumbnail.vp-grid,
.thumbnail:not([data-vp-pos]) {
    /* Normal grid behavior - no special positioning */
}

/* Hidden position */
.thumbnail.vp-hidden,
.thumbnail[data-vp-pos="hidden"] {
    opacity: 0;
    pointer-events: none;
    visibility: hidden;
}

/* Previous tile in viewport */
.thumbnail.vp-prev,
.thumbnail[data-vp-pos="prev"] {
    opacity: 0.7;
    cursor: pointer;
}

.thumbnail.vp-prev:hover,
.thumbnail[data-vp-pos="prev"]:hover {
    opacity: 0.85;
}

/* Current (center) tile in viewport */
.thumbnail.vp-current,
.thumbnail[data-vp-pos="current"] {
    opacity: 1;
    z-index: 10;
}

/* Next tile in viewport */
.thumbnail.vp-next,
.thumbnail[data-vp-pos="next"] {
    opacity: 0.7;
    cursor: pointer;
}

.thumbnail.vp-next:hover,
.thumbnail[data-vp-pos="next"]:hover {
    opacity: 0.85;
}

/* Hide badges on side tiles in viewport mode */
.thumbnail.vp-prev .thumbnail-badges,
.thumbnail.vp-next .thumbnail-badges,
.thumbnail[data-vp-pos="prev"] .thumbnail-badges,
.thumbnail[data-vp-pos="next"] .thumbnail-badges {
    opacity: 0;
}

/* Scale-aware badge visibility in viewport */
.thumbnail.vp-current .thumbnail-badges,
.thumbnail[data-vp-pos="current"] .thumbnail-badges {
    opacity: 1;
}

/* ============================================
   RESPONSIVE SCALING
   ============================================ */

@media (max-width: 768px) {
    .tile-filename {
        font-size: 0.7rem;
    }
}
